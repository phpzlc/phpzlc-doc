<html lang="en">

<head>
  <title>PHPZlc & Symfony4+ 后台内核(Admin)</title>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="baidu-site-verification" content="code-OoCu9VCIRn" />
  <meta name="baidu-site-verification" content="code-h0wILViqaf" />
  <meta name="baidu-site-verification" content="code-6w6tR8FnFh" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="后台内核,为后台业务提供底层策略,写法支持.(导航菜单,基础页面)">
  <meta name="keywords" content="admin,phpzlc/admin,后台">
  <meta name="author" content="CJayHe">
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  <link
    href='/assets/css/fonts.googleapis.com.css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
    rel='stylesheet' type='text/css'>

  <!-- <script type="text/javascript" src="/assets/plugins/jquery-3.4.1.min.js"></script> -->
  <script src="/assets/plugins/jquery.js"></script>
  <!-- FontAwesome JS -->
  <script defer src="/assets/fontawesome/js/all.js"></script>
  <script src="/assets/author.js"></script>
  <!-- Global CSS -->
  <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
  <!-- Plugins CSS -->
  <link rel="stylesheet" href="/assets/plugins/prism/prism.css">
  <link rel="stylesheet" href="/assets/plugins/elegant_font/css/style.css">
  <!-- Theme CSS -->
  <link id="theme-style" rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/main.css?v=2020">
  <link rel="stylesheet" href="/assets/css/reward.css">
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4d26e6c3f68c2a83660fb0f8968e60c3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

<body class="body-blue">
<div class="page-wrapper">
    <header id="header" class="header">
  <div class="container">
    <div class="branding">
      <h1 class="logo">
        <a href="/">
          <span aria-hidden="true" class="icon_documents_alt icon"></span>
          <span class="text-highlight">PHPZLC</span><span class="text-bold">Docs</span>
        </a>
      </h1>
    </div>
    <!--//branding-->
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">首页</a></li>
      <li class="breadcrumb-item active">文档支持</li>
    </ol>
    <div class="top-search-box">
      <form class="form-inline search-form justify-content-center" action="/search" method="get">

        <input type="text" placeholder="搜索..." name="search" class="form-control search-input" id="search-input">
        <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
      </form>
    </div>
  </div>
  <!--//container-->
</header>
<!--//header-->
    <div class="doc-wrapper">
        <div class="container">
            <div class="doc-body row">
                <style type="text/css">
  html {
    font-size: 62.5%;
  }

  #left-div {
    border-width: 2px;
    width: 250px;
    float: left;
    margin-right: 20px;
    /* font-family: Georgia, serif; */
    font-family: "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
  }

  /* 导航 */
  .nav {
    margin-top: 15px;
  }

  .nav-back {
    display: none;
  }

  .nav-ul-one .nav-li-one {
    list-style: none;
  }

  .nav-ul-one .nav-li-one a {
    display: block;
    font-size: 16px;
    line-height: 30px;
    color: #494d55;
    text-decoration: none;
  }

  .nav-ul-one .nav-li-one a:hover {
    color: #00adef;
  }

  .nav-ul-two {
    padding-left: 20px;
  }

  .nav-ul-two .nav-li-two {
    padding: 0;
    list-style: none;
  }

  .nav-ul-two .nav-li-two a {
    font-size: 14px;
    font-weight: normal;
    line-height: 30px;
    /* color: #2d8284; */
    color: #494d55;
    opacity: 0.75;
  }

  .nav-ul-two .nav-li-two a:hover {
    color: #00adef;
  }

  .nav-hidden {
    display: none;
  }

  .nav-ul-one .nav-li-one .a-active {
    color: #00adef;
  }

  /* 移动端样式 */
  @media (max-width: 1199px) {
    .nav {
      position: fixed;
      top: 0;
      right: 100%;
      z-index: 10;
      width: 100%;
      height: 100%;
      margin: 0;
      /* background-color: #494d55ab; */
      background-color: rgba(0, 0, 0, 0.5);
      overflow-y: auto;
      transition: 0.2s linear;
    }

    .nav-back {
      display: block;
      width: 70%;
      padding-left: 2%;
      background: #494d55;
    }

    .nav-back a {
      display: block;
      padding-left: 20px;
      font-size: 1.6rem;
      font-weight: 700;
      line-height: 4rem;
      color: #fff;
      background: url("/assets/images/pro-2.png") no-repeat left center;
    }

    .nav-ul-one {
      padding-top: 1rem;
      padding-left: 3%;
      margin: 0;
      width: 70%;
      background: #f9f9fb;
    }

    .nav-ul-one .nav-li-one a {
      margin-left: 6%;
    }

    .nav-hidden {
      position: fixed;
      left: -1.5rem;
      top: 17rem;
      z-index: 5;
      display: block;
      width: 3rem;
      height: 3rem;
      opacity: 0.5;
      border-radius: 10%;
      padding-left: 1.5rem;
      background: #000 url("/assets/images/pro.png") no-repeat 90% center;
    }
  }
</style>
<div id="left-div">
  <div class="nav-hidden"></div>
  <!-- 导航 -->
  <div class="nav">
    <div class="nav-back"><a href="javascript:;">返回</a></div>
    <ul class="nav-ul-one">
      <li class="nav-li-one"><a href="/doc/install">安装与运行</a></li>
      <li class="nav-li-one"><a href="/doc/skeleton">目录与结构</a></li>
      <li class="nav-li-one">
        <a href="/doc/config/params#">配置</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/config/params">常量参数配置与环境配置</a></li>
          <li class="nav-li-two"><a href="/doc/config/route">路由(Router)</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/controller#">控制器</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/controller">控制器(Controller)</a></li>
          <li class="nav-li-two"><a href="/doc/errors">错误收集(Errors)</a></li>
          <li class="nav-li-two"><a href="/doc/validate">验证(Validate)</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/db/start#">数据库</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/db/start">创建使用数据库</a></li>
          <li class="nav-li-two"><a href="/doc/db/entity">设计Entity</a></li>
          <li class="nav-li-two"><a href="/doc/db/edit">插入、更新、删除</a></li>
          <li class="nav-li-two"><a href="/doc/db/query">简单查询</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/business#">业务层</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/business">业务层(Business)</a></li>
          <li class="nav-li-two"><a href="/doc/tool/sql">工具类-SQL</a></li>
          <li class="nav-li-two"><a href="/doc/tool/log">工具类-Log</a></a></li>
          <li class="nav-li-two"><a href="/doc/exception">异常(Exception)</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/repository#">高级查询(Repository)</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/repository">概述</a></li>
          <li class="nav-li-two"><a href="/doc/repository/rule">规则</a></li>
          <li class="nav-li-two"><a href="/doc/repository/rule-advanced-usage">规则-高级用法</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/symfony-flex#">支持配套</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/symfony-flex">Symfony Flex</a></li>
          <li class="nav-li-two"><a href="/doc/document-bundle">文档书写(Document)</a></li>
          <li class="nav-li-two"><a href="/doc/data-fixtures">内置数据(DataFixtures)</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/module/business#">业务组件(Business Package)</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/module/business">概述</a></li>
          <li class="nav-li-two"><a href="/doc/module/admin-business">后台开发</a></li>
          <li class="nav-li-two"><a href="/doc/module/RBAC-business">RBAC权限</a></li>
          <li class="nav-li-two"><a href="/doc/module/auth-business">登录授权</a></li>
          <li class="nav-li-two"><a href="/doc/module/platform-business">平台标识</a></li>
          <!--          <li class="nav-li-two"><a href="/doc/module/sms-business">短信(SMS)</a></li>-->
          <li class="nav-li-two"><a href="/doc/module/captcha-business">图形验证码</a></li>
          <li class="nav-li-two"><a href="/doc/module/upload-business">上传业务</a></li>
        </ul>
      </li>
      <li class="nav-li-one">
        <a href="/doc/module/vendor#">功能组件(Vendor Package)</a>
        <ul class="nav-ul-two">
          <li class="nav-li-two"><a href="/doc/module/vendor">概述</a></li>
          <li class="nav-li-two"><a href="/doc/module/admin">后台内核(Admin)</a></li>
          <li class="nav-li-two"><a href="/doc/module/upload">上传(Upload)</a></li>
        </ul>
      </li>
    </ul>
  </div>
</div>
<!-- <script type="text/javascript" src="/assets/plugins/jquery-3.4.1.min.js"></script> -->
<script type="text/javascript" src="/assets/plugins/jquery.js"></script>
<script>
  // 打开菜单
  $(".nav-hidden").click(function () {
    $(".nav").css({ right: "0" })
    $(".nav").css({ opacity: "1" })
  })
  // 隐藏菜单
  $(".nav-back").click(function () {
    $(".nav").css({ right: "100%" })
    $(".nav").css({ opacity: "0" })
  })

  $(".nav").click(function (e) {
    if (e.target.className == "nav") {
      $(".nav").css({ right: "100%" })
      $(".nav").css({ opacity: "0" })
    }
  })
</script>
                <div class="doc-content col-md-9 col-12 order-1" style="float: left">
                    <style type="text/css">
  #md-content {
    /* padding-top: 20px; */
    min-height: 500px;
    /* font-family: Consolas, "Liberation Mono", Courier, monospace; */
    font-family: "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
  }

  #md-content h2 {
    /* padding-top: 20px; */
    margin: 30px 0 10px 0;
  }

  #md-content code {
    background: #494d55;
    /* padding: 5px; */
  }

  #md-content .language-plaintext {
    /* padding: 0;
    border-radius: 1em; */
    background: #f9f9fb;
    color: #494d55;
    /* color: #00adef;
    font-weight: normal; */
  }

  #md-content .language-plaintext code {
    background-color: #f9f9fb;
  }

    {
    % if page.img_all==1 %
  }

  #md-content img {
    width: 100%;
    /* max-width: 600px; */
  }

    {
    % endif %
  }

  pre[class*="language-"] {
    padding: 0;
    background: #494d55;
  }

  .update {
    overflow: hidden;
  }

  .doc-section .title {
    float: left;
    width: 70%;
    margin-bottom: 0;
    font-size: 28px;
    line-height: 1.2;
    text-align: left;
    word-break: break-all;
  }

  .time {
    float: right;
    width: 30%;
    padding-top: 14px;
    font-size: 14px;
    line-height: 1;
    text-align: right;
  }

  #a_local_url {
    /* color: #58bbee; */
    color: #f75252;
  }

  .body-blue .a-xy {
    color: #f75252;
  }

  .body-blue .a-xy:hover {
    color: #f75252;
  }

  .nav-bottom {
    width: 100%;
    margin-top: 20px;
  }

  .nav-bottom .prev {
    display: block;
    float: left;
    font-size: 16px;
    line-height: 1.5;
    color: #333;
    text-decoration: underline;
  }

  .nav-bottom .next {
    display: block;
    float: right;
    font-size: 16px;
    line-height: 1.5;
    color: #333;
    text-decoration: underline;
  }

  @media screen and (max-width: 1199px) {
    #md-content>ol {
      padding-left: 3%;
    }

    #md-content>ol>li>ol {
      padding-left: 6%;
    }

    .doc-section .title {
      width: 100%;
    }

    .time {
      width: 100%;
      text-align: left;
    }
  }
</style>
<div class="content-inner">
  <section class="doc-section">
    <div class="update">
      <h2 class="title">后台内核(Admin)</h2>
      <p class="time"><span>2020-11-05&nbsp;&nbsp;by&nbsp;&nbsp;</span><span id="author"></span>
      </p>
    </div>
    <ul class="a_link"></ul>
    <div id="md-content">
      <h2 id="业务介绍">业务介绍</h2>

<p>后台内核,为后台业务提供底层策略,写法支持.(导航菜单,基础页面,导入,导出等功能)</p>

<h2 id="源码地址">源码地址</h2>

<p><a href="https://github.com/phpzlc/admin">phpzlc/admin</a></p>

<h2 id="安装">安装</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require phpzlc/admin
</code></pre></div></div>

<h2 id="内核基本方法">内核基本方法</h2>

<ol>
  <li>
    <p>后台初始化类</p>

    <p>本框架内的控制类层需要继承该后台初始化类</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">AdminController</span> <span class="kd">extends</span> <span class="nc">SystemBaseController</span>
<span class="p">{</span>
    <span class="cd">/**
     * @var AdminStrategy
     */</span>
    <span class="k">private</span> <span class="nv">$adminStrategy</span><span class="p">;</span>
   
    <span class="cd">/**
     * @var string
     */</span>
    <span class="k">private</span> <span class="nv">$pageTag</span><span class="p">;</span>
       
    <span class="k">public</span> <span class="k">function</span> <span class="n">inlet</span><span class="p">(</span><span class="nv">$returnType</span> <span class="o">=</span> <span class="nc">SystemBaseController</span><span class="o">::</span><span class="no">RETURN_HIDE_RESOURCE</span><span class="p">,</span> <span class="nv">$isLogin</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AdminStrategy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">container</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span><span class="o">-&gt;</span><span class="nf">setPageTag</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">pageTag</span><span class="p">);</span>
           
        <span class="k">return</span> <span class="k">parent</span><span class="o">::</span><span class="nf">inlet</span><span class="p">(</span><span class="nv">$returnType</span><span class="p">,</span> <span class="nv">$isLogin</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="adminstrategy类">AdminStrategy类</h2>

<p>该类用于处理后台管理系统页面上呈现的基础数据,例如：导航菜单,登录,退出登录,背景图等</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```php
//菜单
        $menus = [
            new Menu($title, $ico, $tag, $url, $url_target, [
                new Menu($title, $ico, $tag, $url, $url_target, $childs = array())
            ])
        ];

        $this-&gt;adminStrategy = new AdminStrategy($this-&gt;container);

        //设置管理端基本信息(名称,页面标记,菜单......)
        $this-&gt;adminStrategy
                    // 设置后台标题
                    -&gt;setTitle('admin')
                    // 设置后台入口URL
                    -&gt;setEntranceUrl($this-&gt;generateUrl('admin_manage_index'))
                    // 设置后台出口URL
                    -&gt;setEndUrl($this-&gt;generateUrl('admin_manage_logout'))
                    // 设置修改密码页面URL
                    -&gt;setSettingPwdUrl($this-&gt;generateUrl('admin_manage_edit_password'))
                    // 设置后台页面模式
                    -&gt;setMenuModel(AdminStrategy::menu_model_simple)
                    // 设置页面标记
                    -&gt;setPageTag($this-&gt;page_tag)
                    // 设置清除缓存API地址url
                    -&gt;setClearCacheApiUrl($this-&gt;generateUrl('admin_manage_clearCache'))
                    // 设置后台favicon_ico图标
                    -&gt;setFaviconIco('public/image/100.png')
                    // 设置后台logo
                    -&gt;setLogo('public/image/200.png')
                    // 设置后台导航菜单
                    -&gt;setMenus($menus)
                    // 设置登陆页面背景图片
                    -&gt;setLoginLackGroundImg('public/image/200.png');
```
</code></pre></div></div>

<ol>
  <li>
    <p>设置锚点url</p>

    <p><strong>场景</strong></p>

    <p>用于设置表单提交,取消等需要返回到某个控制器层的action中时,我们可以使用该方法,将action设为锚点.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setUrlAnchor</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置页面标记</p>

    <p>$tag 需要在每个控制器层去定义一个string类型的标记标记名称,并且在设置导航菜单的tag参数中写入设置的标记名称,这样
在生成导航菜单的时候,设置的页面标记就会标记在该导航菜单上.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setPageTag</span><span class="p">(</span><span class="nv">$tag</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置后台标题</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setTitle</span><span class="p">(</span><span class="nv">$title</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置后台favicon_ico图标</p>

    <p>$favicon_ico 地址为图片的相对位置</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setFaviconIco</span><span class="p">(</span><span class="nv">$favicon_ico</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置后台logo</p>

    <p>$logo 地址为图片的相对位置</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setLogo</span><span class="p">(</span><span class="nv">$logo</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置后台入口URL</p>

    <p>$entrance_url 可以使用$this-&gt;generateUrl(string $route)方法进行生成,$route是在yaml中设置的路由名称</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setEntranceUrl</span><span class="p">(</span><span class="nv">$entrance_url</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置后台出口URL</p>

    <p>$end_url 可以使用$this-&gt;generateUrl(string $route)方法进行生成,$route是在yaml中设置的路由名称</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setEndUrl</span><span class="p">(</span><span class="nv">$end_url</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置密码修改页面url</p>

    <p>$setting_pwd_url 可以使用$this-&gt;generateUrl(string $route)方法进行生成,$route是在yaml中设置的路由名称</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setSettingPwdUrl</span><span class="p">(</span><span class="nv">$setting_pwd_url</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置清除缓存API地址url</p>

    <p>$clear_cache_api_url 可以使用$this-&gt;generateUrl(string $route)方法进行生成,$route是在yaml中设置的路由名称</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">setClearCacheApiUrl</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$clear_cache_api_url</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置管理员角色名称</p>
  </li>
</ol>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">public</span> <span class="k">function</span> <span class="n">setAdminRoleName</span><span class="p">(</span><span class="nv">$admin_role_name</span><span class="p">)</span>
</code></pre></div></div>

<ol>
  <li>设置登陆页面背景图片</li>
</ol>

<p>$login_lack_ground_img 地址为图片的相对位置</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">public</span> <span class="k">function</span> <span class="n">setLoginLackGroundImg</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$login_lack_ground_img</span><span class="p">)</span>
</code></pre></div></div>

<ol>
  <li>设置管理员登录头像</li>
</ol>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">public</span> <span class="k">function</span> <span class="n">setAdminAvatar</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$admin_avatar</span><span class="p">)</span>
</code></pre></div></div>

<ol>
  <li>设置定制页面head</li>
</ol>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">public</span> <span class="k">function</span> <span class="n">setHendCode</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$hend_code</span><span class="p">)</span>
</code></pre></div></div>

<p>## 设置面包线</p>

<p>在需要设置面包线的页面调用此方法,我们提供了两种不同模式的面包线的设置方法</p>

<p>第一种 在原有的面包线上添加面包线</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span><span class="o">-&gt;</span><span class="nf">addNavigation</span><span class="p">(</span><span class="k">new</span> <span class="nc">Navigation</span><span class="p">(</span><span class="nv">$title</span><span class="p">,</span> <span class="nv">$url</span> <span class="o">=</span> <span class="s1">''</span><span class="p">));</span>
</code></pre></div></div>

<p>第二种 初始化面包线</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span><span class="o">-&gt;</span><span class="nf">setNavigations</span><span class="p">(</span><span class="k">array</span> <span class="nv">$navigations</span><span class="p">)</span>
</code></pre></div></div>

<p>## 模式切换</p>

<p>本框架提供两种后台页面模式.这两种模式可以进行切换,适合不同量级的后台.
   简单模式是传统的侧边栏.
   复杂模式精细划分各个模块,设置头部导航功能.</p>

<p><strong>场景</strong></p>

<p>复杂模式和简单模式切换</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AdminStrategy</span><span class="p">(</span><span class="nc">ContainerInterface</span> <span class="nv">$container</span><span class="p">);</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span><span class="o">-&gt;</span><span class="nf">setMenuModel</span><span class="p">(</span><span class="n">int</span> <span class="nv">$menu_model</span><span class="p">)</span> <span class="c1">// 复杂模式 menu_model_all = 1; 简单模式 menu_model_simple = 2</span>
</code></pre></div></div>

<p>复杂模式效果</p>

<p><img src="/assets/posts/admin/model_all.png" alt="复杂模式" /></p>

<p>简单模式效果</p>

<p><img src="/assets/posts/admin/model_simple.png" alt="简单模式" /></p>

<p>## 设置导航菜单</p>

<p>我们将要显示的导航菜单根据它的层级设置一个多维数组$menus,然后调用</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">adminStrategy</span><span class="o">-&gt;</span><span class="nf">setMenus</span><span class="p">(</span><span class="k">array</span> <span class="nv">$menus</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>场景</strong></p>

<p>比较常用三级层级的导航菜单</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="k">new</span> <span class="nc">Menu</span><span class="p">(</span><span class="s1">'博客管理系统'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span>
            <span class="k">new</span> <span class="nc">Menu</span><span class="p">(</span><span class="s1">'博客管理'</span><span class="p">,</span> <span class="s1">'fa fa-clone'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span>
                <span class="k">new</span> <span class="nc">Menu</span><span class="p">(</span><span class="s1">'文章管理'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'admin_article_index'</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">generateUrl</span><span class="p">(</span><span class="s1">'admin_blog_manage_article_index'</span><span class="p">),</span> <span class="kc">null</span><span class="p">),</span>
            <span class="p">]),</span>
      
     <span class="p">]);</span>
</code></pre></div></div>

<p>## 页面技术栈</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Vue.js](https://cn.vuejs.org/)

[ElementUI](https://element.eleme.io/#/zh-CN/component/installation)

[Twig](https://www.kancloud.cn/yunye/twig-cn/159454)

[Font图表库](https://fontawesome.dashgame.com/)
</code></pre></div></div>

<p>## 仪表盘基本写法</p>

<p><strong>页面层</strong></p>

<p>页面要先引用</p>

<p><img src="/assets/posts/admin/echart.png" alt="引用" /></p>

<p>数据统计框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"console-small-statistics clearfix"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;a</span> <span class="na">:class=</span><span class="s">"'console-small-statistics-bg'+(index+1)"</span>
           <span class="na">v-for=</span><span class="s">"(item, index) in consoleSmall"</span> <span class="na">:key=</span><span class="s">"index"</span> <span class="na">:href= </span><span class="s">"item.src"</span> <span class="na">style=</span><span class="s">"margin-left: 40px"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"console-statistics-name"</span><span class="nt">&gt;</span>${item.name}$:<span class="nt">&lt;/p&gt;</span>
             <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"console-statistics-value"</span><span class="nt">&gt;</span>${item.value}$<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    data: function () {
             return {
                  consoleSmall: [
                     {
                         id: '',
                         name: '',
                         value: '',
                         src: ''
                     },
                       
                  ],
             }
    },
</code></pre></div></div>

<p><img src="/assets/posts/admin/data_box.png" alt="数据统计框" /></p>

<p>数据统计表</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"echarts-content clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;el-col&gt;</span>
                <span class="nt">&lt;el-col</span> <span class="na">:span=</span><span class="s">"12"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"main1"</span> <span class="na">style=</span><span class="s">"width: 100%;height:400px;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"position: absolute; margin-left: 365px; margin-top: -30px; z-index: 100; font-size: 16px"</span><span class="nt">&gt;</span>最近七日博客数增长图<span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/el-col&gt;</span>

                <span class="nt">&lt;el-col</span> <span class="na">:span=</span><span class="s">"12"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"main2"</span> <span class="na">style=</span><span class="s">"width: 100%;height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"position: absolute; margin-left: 365px; margin-top: -30px; z-index: 100; font-size: 16px"</span><span class="nt">&gt;</span>最近七日用户数增长图<span class="nt">&lt;/span&gt;</span>

                <span class="nt">&lt;/el-col&gt;</span>
            <span class="nt">&lt;/el-col&gt;</span>

   <span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   setTimeout(function(){
               // 基于准备好的dom,初始化echarts实例
               var myChart1 = echarts.init(document.getElementById('main1'), "macarons");
               option1 = {
                   xAxis: {
                       type: 'category',
                       boundaryGap: false,
                       data: [],
                   },
                   yAxis: {
                       type: 'value'
                   },
                   series: [{
                       data: [],
                       type: 'line',
                       areaStyle: {}
                   }]
               };
               // 使用刚指定的配置项和数据显示图表.
               myChart1.setOption(option1);

</code></pre></div></div>
<p><img src="/assets/posts/admin/data_cart.png" alt="数据统计表" /></p>

<p>## 列表页面基本写法</p>

<p><strong>页面层</strong></p>

<p>搜索框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       <span class="nt">&lt;el-row</span> <span class="na">class=</span><span class="s">"page-search"</span><span class="nt">&gt;</span>
           <span class="nt">&lt;el-form</span> <span class="na">ref=</span><span class="s">"searchForm"</span> <span class="na">:inline=</span><span class="s">"true"</span> <span class="na">:model=</span><span class="s">"searchForm"</span> <span class="na">label-width=</span><span class="s">"90px"</span> <span class="na">style=</span><span class="s">"margin-left: 10px"</span><span class="nt">&gt;</span>
   
               <span class="nt">&lt;el-form-item</span> <span class="na">label=</span><span class="s">"input输入框"</span> <span class="na">prop=</span><span class="s">"user_name"</span><span class="nt">&gt;</span>
                   <span class="nt">&lt;el-input</span> <span class="na">v-model=</span><span class="s">"searchForm.user_name"</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="na">clearable</span> <span class="na">placeholder=</span><span class="s">"请输入"</span><span class="nt">&gt;</span>
                   <span class="nt">&lt;/el-input&gt;</span>
               <span class="nt">&lt;/el-form-item&gt;</span>
   
               <span class="nt">&lt;el-form-item</span> <span class="na">label=</span><span class="s">"时间选择框"</span> <span class="na">prop=</span><span class="s">"login_at"</span> <span class="na">class=</span><span class="s">"search-item-time"</span><span class="nt">&gt;</span>
                   <span class="nt">&lt;el-date-picker</span> <span class="na">v-model=</span><span class="s">"searchForm.login_at"</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="na">clearable</span> <span class="na">type=</span><span class="s">"daterange"</span>
                                   <span class="na">range-separator=</span><span class="s">"-"</span> <span class="na">start-placeholder=</span><span class="s">"开始日期"</span> <span class="na">end-placeholder=</span><span class="s">"结束日期"</span><span class="nt">&gt;</span>
                   <span class="nt">&lt;/el-date-picker&gt;</span>
               <span class="nt">&lt;/el-form-item&gt;</span>
   
               <span class="nt">&lt;el-form-item&gt;</span>
                   <span class="nt">&lt;el-button</span> <span class="na">type=</span><span class="s">"primary"</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"searchBtn()"</span><span class="nt">&gt;</span> 搜索 <span class="nt">&lt;/el-button&gt;</span>
                   <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"resetForm('searchForm')"</span><span class="nt">&gt;</span> 重置 <span class="nt">&lt;/el-button&gt;</span>
               <span class="nt">&lt;/el-form-item&gt;</span>
   
           <span class="nt">&lt;/el-form&gt;</span>
   
       <span class="nt">&lt;/el-row&gt;</span>
       
</code></pre></div></div>

<p>数据显示</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="nt">&lt;el-table</span> <span class="na">:data=</span><span class="s">"listData"</span> <span class="na">style=</span><span class="s">"width: 100%"</span> <span class="na">border</span> <span class="na">class=</span><span class="s">"mt-10"</span><span class="nt">&gt;</span>
    
            <span class="nt">&lt;el-table-column</span> <span class="na">prop=</span><span class="s">"数据"</span> <span class="na">label=</span><span class="s">"数据"</span><span class="nt">&gt;&lt;/el-table-column&gt;</span>
            // 操作行
            <span class="nt">&lt;el-table-column</span> <span class="na">prop=</span><span class="s">"date"</span> <span class="na">label=</span><span class="s">"操作"</span> <span class="na">width=</span><span class="s">"200"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;template</span> <span class="na">slot-scope=</span><span class="s">"scope"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"handleEdit(scope.$index, scope.row)"</span> <span class="na">type=</span><span class="s">"primary"</span><span class="nt">&gt;</span> 编辑 <span class="nt">&lt;/el-button&gt;</span>
                    <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"handleDelete(scope.$index, scope.row)"</span> <span class="na">type=</span><span class="s">"danger"</span><span class="nt">&gt;</span> 删除 <span class="nt">&lt;/el-button&gt;</span>
                    <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"handleDisable(scope.$index, scope.row)"</span> <span class="na">type=</span><span class="s">"danger"</span><span class="nt">&gt;</span> 禁用 <span class="nt">&lt;/el-button&gt;</span>
                    <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"handleEnable(scope.$index, scope.row)"</span> <span class="na">type=</span><span class="s">"success"</span><span class="nt">&gt;</span> 启用 <span class="nt">&lt;/el-button&gt;</span>
                <span class="nt">&lt;/template&gt;</span>
            <span class="nt">&lt;/el-table-column&gt;</span>
          
        <span class="nt">&lt;/el-table&gt;</span>
   
        // 分页
        <span class="nt">&lt;el-col</span> <span class="na">class=</span><span class="s">"mt-20 clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;el-pagination</span> <span class="na">class=</span><span class="s">"page"</span> <span class="err">@</span><span class="na">current-change=</span><span class="s">"handleCurrentChange"</span> <span class="err">@</span><span class="na">size-change=</span><span class="s">"handleSizeChange"</span>
                           <span class="na">:page-sizes=</span><span class="s">"[20, 60, 100, 200]"</span> <span class="na">:page-size=</span><span class="s">""</span> <span class="na">:hide-on-single-page=</span><span class="s">"true"</span> <span class="na">:current-page=</span><span class="s">""</span>
                           <span class="na">layout=</span><span class="s">"total, sizes, prev, pager, next, jumper"</span> <span class="na">:total=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/el-pagination&gt;</span>
        <span class="nt">&lt;/el-col&gt;</span>
</code></pre></div></div>

<p>Vue代码模块</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;script&gt;</span>
       <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
           <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#main-content</span><span class="dl">'</span><span class="p">,</span>
           <span class="c1">//用于替换vue数据调用符号</span>
           <span class="na">delimiters</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">${</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">}$</span><span class="dl">'</span><span class="p">],</span>
           <span class="na">data</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
               <span class="k">return</span> <span class="p">{</span>
                   <span class="na">searchForm</span><span class="p">:</span> <span class="p">{},</span>
                   <span class="na">listData</span><span class="p">:</span> <span class="p">[],</span>
               <span class="p">}</span>
           <span class="p">},</span>
   
           <span class="nx">created</span><span class="p">(){</span>
               <span class="c1">//页面初始化勾子</span>
           <span class="p">},</span>
   
           <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
                   <span class="nx">handleCurrentChange</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                       <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">urlParamWrite</span><span class="p">(</span><span class="nx">getSelfUrl</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">page</span><span class="dl">'</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
                   <span class="p">},</span>
   
                   <span class="nx">handleSizeChange</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                       <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">urlParamWrite</span><span class="p">(</span><span class="nx">getSelfUrl</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">rows</span><span class="dl">'</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
                   <span class="p">},</span>
   
                   <span class="c1">// 搜索按钮</span>
                   <span class="nx">searchBtn</span><span class="p">()</span> <span class="p">{},</span>
   
                   <span class="c1">// 重置按钮</span>
                   <span class="nx">resetForm</span><span class="p">(</span><span class="nx">formName</span><span class="p">){</span>
                       <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="nx">formName</span><span class="p">].</span><span class="nx">resetFields</span><span class="p">();</span>
                   <span class="p">},</span>
   
                   <span class="nx">handleDisable</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">){},</span>
   
                   <span class="nx">handleEnable</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">){},</span>
   
           <span class="p">}</span>
   
       <span class="p">})</span>
   <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p><img src="/assets/posts/admin/index.png" alt="效果" /></p>

<p>## 编辑页面基本写法</p>

<p><strong>页面层</strong></p>

<p>输入框(文本输入,密码输入等多种类型)</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nt">&lt;el-input</span> <span class="na">v-model=</span><span class="s">""</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="na">clearable</span> <span class="na">placeholder=</span><span class="s">"请输入"</span><span class="nt">&gt;&lt;/el-input&gt;</span>
</code></pre></div></div>

<p>下拉单选框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;el-select</span> <span class="na">v-model=</span><span class="s">"value"</span> <span class="na">placeholder=</span><span class="s">"请选择"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;el-option</span>
          <span class="na">v-for=</span><span class="s">"item in options"</span>
          <span class="na">:key=</span><span class="s">"item.value"</span>
          <span class="na">:label=</span><span class="s">"item.label"</span>
          <span class="na">:value=</span><span class="s">"item.value"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/el-option&gt;</span>
      <span class="nt">&lt;/el-select&gt;</span>
   
    <span class="nt">&lt;script&gt;</span>
      <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">{</span>
            <span class="na">options</span><span class="p">:</span> <span class="p">[],</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>下拉多选框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;el-select</span> <span class="na">v-model=</span><span class="s">"value"</span> <span class="na">multiple</span> <span class="na">placeholder=</span><span class="s">"请选择"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;el-option</span>
              <span class="na">v-for=</span><span class="s">"item in options"</span>
              <span class="na">:key=</span><span class="s">"item.value"</span>
              <span class="na">:label=</span><span class="s">"item.label"</span>
              <span class="na">:value=</span><span class="s">"item.value"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/el-option&gt;</span>
          <span class="nt">&lt;/el-select&gt;</span>
       
        <span class="nt">&lt;script&gt;</span>
          <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="na">options</span><span class="p">:</span> <span class="p">[],</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>
<p>上传控件</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;el-upload</span>
      <span class="na">class=</span><span class="s">"upload-demo"</span>
      <span class="na">action=</span><span class="s">""</span>
      <span class="na">:on-preview=</span><span class="s">"handlePreview"</span>
      <span class="na">:on-remove=</span><span class="s">"handleRemove"</span>
      <span class="na">:before-remove=</span><span class="s">"beforeRemove"</span>
      <span class="na">multiple</span>
      <span class="na">:limit=</span><span class="s">"3"</span>
      <span class="na">:on-exceed=</span><span class="s">"handleExceed"</span>
      <span class="na">:file-list=</span><span class="s">"fileList"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"small"</span> <span class="na">type=</span><span class="s">"primary"</span><span class="nt">&gt;</span>点击上传<span class="nt">&lt;/el-button&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">slot=</span><span class="s">"tip"</span> <span class="na">class=</span><span class="s">"el-upload__tip"</span><span class="nt">&gt;</span>只能上传jpg/png文件,且不超过500kb<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/el-upload&gt;</span>
   
    <span class="nt">&lt;script&gt;</span>
      <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">{</span>
            <span class="na">fileList</span><span class="p">:</span> <span class="p">[]</span>
          <span class="p">};</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
          <span class="nx">handleRemove</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">fileList</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">fileList</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">handlePreview</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">handleExceed</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">fileList</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s2">`</span><span class="err">当前限制选择 3 个文件,本次选择了 </span><span class="p">${</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="err"> 个文件,共选择了 </span><span class="p">${</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">fileList</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="err"> 个文件</span><span class="s2">`</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">beforeRemove</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">fileList</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="s2">`</span><span class="err">确定移除 </span><span class="p">${</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="p">}</span><span class="err">？</span><span class="s2">`</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>
<p>日期选择器</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;el-date-picker</span>
         <span class="na">v-model=</span><span class="s">"value1"</span>
         <span class="na">type=</span><span class="s">"daterange"</span>
         <span class="na">range-separator=</span><span class="s">"至"</span>
         <span class="na">start-placeholder=</span><span class="s">"开始日期"</span>
         <span class="na">end-placeholder=</span><span class="s">"结束日期"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;/el-date-picker&gt;</span>
   <span class="nt">&lt;script&gt;</span>
     <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
       <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="p">{</span>
           <span class="na">value1</span><span class="p">:</span> <span class="dl">''</span>
         <span class="p">};</span>
       <span class="p">}</span>
     <span class="p">};</span>
</code></pre></div></div>

<p>单选框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;el-radio</span> <span class="na">v-model=</span><span class="s">"radio"</span> <span class="na">label=</span><span class="s">"1"</span><span class="nt">&gt;</span>备选项<span class="nt">&lt;/el-radio&gt;</span>
     
   <span class="nt">&lt;script&gt;</span>
     <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
       <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="p">{</span>
           <span class="na">radio</span><span class="p">:</span> <span class="dl">''</span>
         <span class="p">};</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>多选框</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- `checked` 为 true 或 false --&gt;</span>
    <span class="nt">&lt;el-checkbox</span> <span class="na">v-model=</span><span class="s">"checked"</span><span class="nt">&gt;</span>备选项<span class="nt">&lt;/el-checkbox&gt;</span>
   
   <span class="nt">&lt;script&gt;</span>
     <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
       <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="p">{</span>
           <span class="na">checked</span><span class="p">:</span> <span class="kc">true</span>
         <span class="p">};</span>
       <span class="p">}</span>
     <span class="p">};</span>
   <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>更多控件请点击<a href="https://element.eleme.io/#/zh-CN/component/installation">ElementUI</a></p>

<p>## 导入功能基本写法</p>

<p>导入导出功能需要<a href="https://packagist.org/packages/phpoffice/phpspreadsheet">phpoffice/phpspreadsheet</a></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   composer require phpoffice/phpspreadsheet
</code></pre></div></div>

<p><strong>页面层</strong></p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nt">&lt;el-upload</span>
          <span class="na">class=</span><span class="s">"upload-demo"</span>
          <span class="na">action=</span><span class="s">"导入地址"</span>
          <span class="na">:limit=</span><span class="s">"1"</span>
          <span class="na">:on-success=</span><span class="s">"handleImport"</span>
          <span class="na">:on-error = </span><span class="s">"handleImport"</span>
          <span class="na">:file-list=</span><span class="s">"fileList"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"small"</span> <span class="na">type=</span><span class="s">"primary"</span><span class="nt">&gt;</span>点击上传<span class="nt">&lt;/el-button&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">slot=</span><span class="s">"tip"</span> <span class="na">class=</span><span class="s">"el-upload__tip"</span><span class="nt">&gt;</span>只能上传xls/xlsx文件<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/el-upload&gt;</span>
    
    <span class="nt">&lt;script&gt;</span>
          <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
            <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
              <span class="nx">handleImport</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
                  <span class="kd">const</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                  <span class="nx">resultPreprocess</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="dl">"</span><span class="s2">admin_url_anchor()</span><span class="dl">"</span><span class="p">);</span>
              <span class="p">},</span>
            <span class="p">}</span>
          <span class="p">}</span>
    <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p><strong>控制器层</strong></p>

<p>下载导入模板</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// Business层</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">importTemplateFilePath</span><span class="p">()</span>
    <span class="p">{</span>
            <span class="k">return</span> <span class="s1">'模板名称.xlsx'</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">public</span> <span class="k">function</span> <span class="n">downloadImportTemplate</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">goUrl</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getSchemeAndHttpHost</span><span class="p">()</span> <span class="mf">.</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getBasePath</span><span class="p">()</span> <span class="mf">.</span> <span class="s1">'/存放导入文件的文件夹/'</span> <span class="mf">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">importTemplateFilePath</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="c1">// Controller层</span>
    <span class="nv">$Business</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Business</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">container</span><span class="p">);</span>
    <span class="nv">$Business</span><span class="o">-&gt;</span><span class="nf">goUrl</span><span class="p">(</span><span class="nv">$Business</span><span class="o">-&gt;</span><span class="nf">downloadImportTemplate</span><span class="p">(</span><span class="nc">Request</span> <span class="nv">$request</span><span class="p">));</span>
</code></pre></div></div>

<p>导入模板</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">// Business层</span>
   <span class="k">public</span> <span class="k">function</span> <span class="n">format</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="k">if</span><span class="p">(</span><span class="nb">empty</span><span class="p">(</span><span class="nv">$data</span><span class="p">)){</span>
               <span class="k">throw</span> <span class="k">new</span> <span class="nc">PhpZlcApiException</span><span class="p">(</span><span class="s1">'导入数据不能为空'</span><span class="p">);</span>
           <span class="p">}</span>
   
           <span class="nv">$info</span> <span class="o">=</span> <span class="p">[];</span>
         
           <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">){</span>
               <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getValue</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            
               <span class="nv">$info</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
                   <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span>
               <span class="p">);</span>
  
           <span class="p">}</span>
           <span class="k">return</span> <span class="nv">$info</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="c1">// Controller层</span>
   <span class="nb">set_time_limit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
   <span class="nb">ob_start</span><span class="p">();</span>
   
   <span class="nv">$Business</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Business</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">container</span><span class="p">);</span>
   
   <span class="cd">/**
      * @var Connection $conn
   */</span>
   <span class="nv">$conn</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getDoctrine</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">();</span>
   <span class="nv">$conn</span><span class="o">-&gt;</span><span class="nf">beginTransaction</span><span class="p">();</span>
   
   <span class="k">try</span> <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$Business</span><span class="o">-&gt;</span><span class="nf">importData</span><span class="p">();</span>
   
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">// 将$data的数据循环插入</span>
           <span class="nv">$conn</span><span class="o">-&gt;</span><span class="nf">commit</span><span class="p">();</span>
        <span class="p">}</span>
   
        <span class="k">return</span> <span class="nc">Responses</span><span class="o">::</span><span class="nf">success</span><span class="p">(</span><span class="s1">'导入成功'</span><span class="p">);</span>
   
   <span class="p">}</span><span class="k">catch</span> <span class="p">(</span><span class="nc">PhpZlcApiException</span> <span class="nv">$exception</span><span class="p">){</span>
        <span class="nv">$conn</span><span class="o">-&gt;</span><span class="nf">rollBack</span><span class="p">();</span>
        <span class="k">return</span> <span class="nc">Responses</span><span class="o">::</span><span class="nf">error</span><span class="p">(</span><span class="nv">$exception</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">());</span>
   <span class="p">}</span>
</code></pre></div></div>

<p>## 导出功能基本写法</p>

<p><strong>页面层</strong></p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;el-button</span> <span class="na">size=</span><span class="s">"mini"</span> <span class="na">type=</span><span class="s">"success"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"export_data()"</span><span class="nt">&gt;</span>导出<span class="nt">&lt;/el-button&gt;</span>

    <span class="nt">&lt;script&gt;</span>
       <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
          <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">export_data</span><span class="p">(){</span>
              <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">urlParamWrite</span><span class="p">(</span><span class="nx">getSelfUrl</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">ex</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">);</span>
           <span class="p">},</span>
          <span class="p">}</span>
       <span class="p">}</span>
       <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>
<p><strong>控制器层</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kn">use</span> <span class="nc">PHPZlc\Admin\Strategy\Excel\Export</span><span class="p">;</span>

    <span class="nv">$ex</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Export</span><span class="p">();</span>

    <span class="c1">// 表格第一行</span>
    <span class="nv">$head</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="c1">// 数据库数据</span>
    <span class="nv">$list</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="nv">$data</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$list</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">){</span>
         <span class="nv">$data</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
          <span class="c1">// 循环的数据</span>
        <span class="p">);</span>
    <span class="p">}</span>
    
    <span class="cd">/**
        * 导出
        *
        * @param string $title  标题
        * @param array $head 表头 ["表头1", "表头2"]
        * @param array $data 内容 [{"1", "1"}]
        * @param bool $is_need 是否插入序号
        * @param array $mergeCells 合并单元格 [{0,1,0,2})] 0,1 表示合并开始单元格数组坐标, 0,2 代表合并结束单元格数组坐标
        * @param string $format
        * @throws \PhpOffice\PhpSpreadsheet\Exception
    */</span>
   <span class="nv">$ex</span><span class="o">-&gt;</span><span class="nf">export</span><span class="p">(</span><span class="nv">$title</span><span class="p">,</span> <span class="nv">$head</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$is_need</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$mergeCells</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$format</span> <span class="o">=</span> <span class="s1">'Xls'</span><span class="p">);</span>
</code></pre></div></div>


      <div class="nav-bottom">
        
        <a class="prev" href="/doc/module/vendor">上一篇</a>
        

        
        <a class="next" href="/doc/module/upload">下一篇</a>
        
      </div>
    </div>
    <div class="entry-shang text-center">
      <p class="fork_update">找到错别字了？本文档有什么问题么？<a
          href="https://github.com/phpzlc/phpzlc.github.io/edit/master/_posts/doc/module/2020-11-05-admin.markdown" target="_blank">分叉并编辑</a> 它&nbsp;！
      </p>
      <button class="zs show-zs btn btn-bred">赞赏</button>
      <!-- <p>「感觉有帮助？对您有价值？开源不易, 一键投喂 牛奶/咖啡/冰阔乐！」</p> -->
    </div>

    <div class="zs-modal-bg"></div>
    <div class="zs-modal-box">
      <div class="zs-modal-head">
        <!-- 关闭按钮 -->
        <button type="button" class="close">×</button>
        <!-- 左上角logo和文字 -->
        <span class="author_zs"> <img src="/assets/images/jay.jpeg" />CJayhe </span>
        <p class="tip"><i></i><span>谢谢您的赞赏~</span></p>
      </div>
      <div class="zs-modal-body">
        <div class="zs-modal-btns">
          <button class="btn btn-blink" data-num="2">2元</button>
          <button class="btn btn-blink" data-num="5">5元</button>
          <button class="btn btn-blink" data-num="10">10元</button>
          <button class="btn btn-blink" data-num="50">50元</button>
          <button class="btn btn-blink" data-num="100">100元</button>
          <button class="btn btn-blink" data-num="1">任意金额</button>
        </div>
        <div class="zs-modal-pay">
          <button class="btn btn-bred" id="pay-text">2元</button>
          <p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
          <img src="/assets/images/pay/wechat-btn.png" id="pay-image" />
        </div>
      </div>
      <div class="zs-modal-footer">
        <!-- 赞赏模式，你可以全部打开，也可以选择留一个你喜欢的
                             只需注释掉你想关闭的赞赏模式对应的代码就行，然后再相应的微调一下样式
                        -->
        <!-- 支付宝控件 -->
        <label>
          <input type="radio" name="zs-type" value="alipay" class="zs-type" checked="checked" />
          <span class="zs-alipay"><img src="/assets/images/pay/alipay-btn.png" /></span>
        </label>
        <!-- 微信控件 -->
        <label>
          <input type="radio" name="zs-type" value="wechat" class="zs-type" />
          <span class="zs-wechat"><img src="/assets/images/pay/wechat-btn.png" /></span>
        </label>
        <!-- 清除浮动 -->
        <div class="clear"></div>
      </div>
    </div>
    <div style="font-size: 12px">
      <div>
        <p class="rules">非特殊说明，本站所有文章均为原创，并遵循<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"
            target="_blank" class="a-xy">CC BY-NC-SA 4.0 协议</a>许可。</p>
        <p class="hidden-xs">转载前请务必署名，本文链接：<a href="" id="a_local_url"></a>。</p>
      </div>
    </div>
  </section>
  <!--//doc-section-->
</div>
<!--//content-inner-->
<script>
  $(function () {
    var title = $("#md-content h2");
    // console.log(title);
    html = '';
    title.each(function () {
      var text = $(this)[0].innerText;
      var id = $(this).eq(0).attr("id");
      // console.log(text, id)
      html += `<li><a href="#${id}">${text}</a></li>`
    })
    $(".a_link").append(html)
  })
</script>
                </div>
            </div><!--//doc-body-->
        </div><!--//container-->
    </div><!--//doc-wrapper-->
    <div id="promo-block" class="promo-block">
  <div class="container">
    <div class="promo-block-inner-bottom">
      <ul class="ul-1">
        <li class="li-1 li-link">
          <p>关联站</p>
          <ul>
            <li><a href="https://github.com/phpzlc/" target="_blank">GitHub 主页</a></li>
            <li><a href="http://symfony.com/" target="_blank">Symfony 官网</a></li>
            <li><a href="http://www.symfonychina.com/" target="_blank">Symfony 中文文档</a></li>
            <li><a href="https://getcomposer.org/" target="_blank">Composer 官网</a></li>
            <li><a href="https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/index.html"
                target="_blank">Doctrine 官网</a></li>
          </ul>
        </li>
        <li class="li-1 li-link">
          <p>热门Blog</p>
          <ul>
            <li><a href="/doc/symfony-flex" target="_blank">Symfony Flex</a></li>
            <li><a href="/doc/db/entity" target="_blank">设计Entity</a></li>
            <li><a href="/blog/9.html" target="_blank">更好的防御BREACH攻击</a></li>
            <li><a href="/blog/5.html" target="_blank">PHP生成全景图(krpano)</a></li>
            <li><a href="/blog/2.html" target="_blank">Git分支参与者的常用操作</a></li>
          </ul>
        </li>
        <li class="li-1 li-community">
          <p>社区支持<span class="community-slack"><a href="/blog/13.html">建立集中高效的开源社区，PHPZlc 核心活动场所 Slack</a></span></p>
          <!-- <span class="community-slack"><a href="/blog/13.html">建立集中高效的开源社区，PHPZlc 核心活动场所 Slack</a></span> -->
          <ul class="community-ul">
            <li class="li-code">
              <div>
                <img src="/assets/images/qq-qun.png">
                <p>扫码加入QQ交流群</p>
              </div>
            </li>
            <li class="li-code">
              <div>
                <img src="/assets/images/zxsjgzh-2.png">
                <p>扫码关注公众号</p>
              </div>
            </li>
            <li class="li-code">
              <div>
                <img src="/assets/images/toutiao-jay.png">
                <p>扫码关注作者头条号</p>
              </div>
            </li>
            <li class="li-code">
              <div>
                <img src="/assets/images/zhihu-1.png">
                <p>扫码关注作者知乎号</p>
              </div>
            </li>
          </ul>
        </li>
      </ul>
      <p style="clear: both">
    </div>
    <!--//promo-block-inner-->
  </div>
  <!--//container-->
</div>
<!--//promo-block-->
</div>
<!--//page-wrapper-->

<footer class="footer text-center">
  <div class="container">
    <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
    <small class="copyright">该站点设计由 <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> 提供, 由
      <a href="https://pages.github.com/" target="_blank">GitHub Pages</a> 生成。Copyright © <span
        id="copyright-year"></span> by CJayhe. All rights reserved.</small>

  </div>
  <div class="qun">
    <a target="_blank" href="https://jq.qq.com/?_wv=1027&k=ZpwdagVG">
      <img border="0" src="/assets/images/qq.png?v=20210324" alt="一键加群" title="一键加群">
      <!-- <p>关注我们</p>
      <p>点击入群</p> -->
      <p>QQ群</p>
    </a>
    <a class="a-2" target="_blank"
      href="https://join.slack.com/t/phpzlc/shared_invite/zt-r7mxo37k-jamLvYensNjo89eJdrg_7g">
      <img src="/assets/images/slack.png?v=1" alt="一键加群" title="一键加群">
      <!-- <p>关注我们</p>
      <p>点击入群</p> -->
      <p>Slack</p>
    </a>
  </div>
  <!--//container-->
</footer>
<!--//footer-->


<!-- Main Javascript -->
<!-- <script type="text/javascript" src="/assets/plugins/jquery-3.4.1.min.js"></script> -->
<script type="text/javascript" src="/assets/plugins/jquery.js"></script>
<script TYPE="text/javascript" src="/assets/js/reward.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
<script type="text/javascript" src="/assets/js/main.js"></script>
<script type="text/javascript" src="/assets/plugins/prism/prism.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
<script type="text/javascript" src="/assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
<script type="text/javascript">
  $(function () {
    $("#a_local_url").text(localBaseUrl());
    $("#a_local_url").attr({ href: localBaseUrl() });


    var date = new Date();
    var year = date.getFullYear();
    $('#copyright-year').text(year);


    $('#left-div a').each(function () {
      var path = window.location.pathname;
      if ($(this).attr("href") == path || $(this).attr("href") == path.substring(0, path.length - 1)) {
        $(this).addClass('a-active');
      }
    })

    $('#author').text(getAuthor('2'));

    $('.author').each(function () {
      $(this).html('作者：' + getAuthor($(this).data('id')));
    });

    function localBaseUrl() {
      return location.protocol + '//' + location.host + location.pathname;
    }
  })
</script>
</body>
</html>